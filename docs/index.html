<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Tools for processing Taqman Array Cards and other sources of environmental sampling data.">
<title>Tools for processing environmental sampling data collected in Dhaka, Bangladesh • es.dhaka</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for processing environmental sampling data collected in Dhaka, Bangladesh">
<meta property="og:description" content="Tools for processing Taqman Array Cards and other sources of environmental sampling data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">es.dhaka</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/processing_es_data.html">Vignette Title</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gilesjohnr/es.dhaka/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="esdhaka-an-r-package-for-processing-environmental-sampling-data">
<strong>es.dhaka</strong>: an R package for processing environmental sampling data<a class="anchor" aria-label="anchor" href="#esdhaka-an-r-package-for-processing-environmental-sampling-data"></a>
</h1></div>
<p>This package provides data and methods for parsing and compiling data sets that measure infectious disease burden using Environmental Sampling (ES) methods. The tools here were developed specifically for ES studies in Dhaka, Bangladesh and are designed to provide data outputs that can be used with the open-source companion package <code>es</code> which can be found <a href="https://gilesjohnr.github.io/es/" class="external-link">HERE</a>. An overview of data and methods are outlined below, with more detailed vignettes available <a href="">HERE</a>.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The tools here are intended to do the heavy lifting when combining data from multiple sources such as:</p>
<ul>
<li><p>Data in .eds and .xls format exported from <a href="https://www.thermofisher.com/us/en/home/life-science/pcr/real-time-pcr/real-time-pcr-instruments.html?gclid=CjwKCAiAi6uvBhADEiwAWiyRdo3P55Qq1NO8sErSvCmVGT2Cs4-5NCzYcgqYhCC6KemKTn6sw7850BoCqbkQAvD_BwE&amp;ef_id=CjwKCAiAi6uvBhADEiwAWiyRdo3P55Qq1NO8sErSvCmVGT2Cs4-5NCzYcgqYhCC6KemKTn6sw7850BoCqbkQAvD_BwE:G:s&amp;s_kwcid=AL!3652!3!606132911219!p!!g!!taqman%20applied%20biosystems!17574808700!139287686778&amp;cid=gsd_pcr_sbu_r02_co_cp1491_pjt9623_gsd00000_0se_gaw_rs_lgn_&amp;gad_source=1" class="external-link">Applied Biosystems qPCR Systems</a> using <a href="https://www.thermofisher.com/us/en/home/global/forms/life-science/quantstudio-6-7-flex-software.html" class="external-link">QuantStudio software</a>.</p></li>
<li><p>Data in .xlsx format containing measurements from <a href="https://www.aquaread.com/" class="external-link">Aquaread water monitoring instruments</a></p></li>
</ul>
<p>The package also contains several important accessory data sets that are required for building compiled the data or for downstream analyses:</p>
<ul>
<li><p>Standard curve data for all Taqman card designs are stored in the <code>standard_curves</code> data object. Standard curves are necessary for estimating the number of gene copies for a target (e.g. viral load), the methods for which can be found in the companion R package <code>es</code>.</p></li>
<li>
<p>The package also contains several data dictionaries referred to as a <code>key</code> that cross reference important information about target names, location names, and standard curve data sets.</p>
<ul>
<li>
<code>key_location_names</code>: These data cross reference the unique (and sometimes duplicated) location names of sampling sites and a set of ‘concise’ names that clean up characters and allow combination of duplicated locations.</li>
<li>
<code>key_target_names</code>: These data cross reference the unique (and sometimes duplicated) target names across all Taqman cards to concise target names, relevant control samples, and whether to include the target in the compiled data set.</li>
<li>
<code>key_standard_curves</code>: These data cross reference each unique experiment name to the appropriate standard curve data souce.</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a>
</h2>
<p>There are four main reproducible functions that parse raw data and compile the results into a single clean format data set. The functions are <code>parse_tac_xls</code> and <code>compile_tac_data</code> for TAC data and <code>parse_aquaprobe_xlsx</code> and <code>compile_aquaprobe_data</code> for the Aquaprobe data.</p>
<ol style="list-style-type: decimal">
<li><p>Parse card-level TAC data output produced by QuantStudio software and extract its contents into individual .csv files containing raw data.</p></li>
<li>
<p>Compile card-level .csv files into a single data set. When compiling, several QC operations are performed:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Excludes sensitive targets based on the <code>key</code> data dictionary included in this package.</p></li>
<li><p>Parse sample IDs into collection dates and an <code>aquaprobe_id</code> used to merge with Aquaprobe data.</p></li>
<li><p>Edit duplicated target names based on the <code>key</code> data dictionary.</p></li>
<li><p>Adjustments to the Ct values are made using blank samples to control for contamination. Specifically, if the corresponding blank is not “Undetermined” for a pathogen in a particular sample, then that pathogen’s Ct value is set to NA for all samples on the same card as the blank and for the following two cards as well.</p></li>
<li><p>Adjustment to Ct values based on amplification controls. Each pathogen is mapped to its corresponding control (MS2 for RNA targets and PhHV for DNA targets) as defined in the <code>key</code> data dictionary. When an amplification control in a sample is positive (Ct &lt; threshold of 40), then all relevant targets in that sample that are “Undetermined” are set to the threshold value (40 in this example).</p></li>
<li><p>Remaining ‘Undetermined’ observations are set to NA.</p></li>
</ol>
</li>
<li><p>Parse Aquaprobe excel files into .csv files with consistent format.</p></li>
<li>
<p>Compile raw Aquaprobe .csv files into one data set. During compilation several QC and formatting tasks are performed:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Duplicated measurements are consolidated by taking the mean of each variable.</p></li>
<li><p>Dates are converted to a standard date object.</p></li>
<li><p>Spatial coordinates in Degree Minute Second (DMS) format are converted to a standard DMS format and converted to Decimal Degrees (DD).</p></li>
<li><p>Aquaprode coded variable names are translated into more readable variable names based on the variable descriptions at <a href="https://www.aquaread.com/sensors" class="external-link">www.aquaread.com/sensors</a>.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level4">
<h4 id="id_1-check-dependencies">1) Check dependencies<a class="anchor" aria-label="anchor" href="#id_1-check-dependencies"></a>
</h4>
<p>The data parsing functions in this package depend on Python 3 and Java. To check and install these you can try the following:</p>
<p>Download Python 3 <a href="https://www.python.org/downloads/" class="external-link">HERE</a> or check current installation with:</p>
<pre class="console"><code>user@computer:~$ python3 --version
Python 3.11.5</code></pre>
<p>Download Java <a href="https://www.oracle.com/java/technologies/downloads/" class="external-link">HERE</a> or check current installation with:</p>
<pre class="console"><code>user@computer:~$ java --version
java 21.0.2 2024-01-16 LTS
Java(TM) SE Runtime Environment (build 21.0.2+13-LTS-58)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.2+13-LTS-58, mixed mode, sharing)</code></pre>
</div>
<div class="section level4">
<h4 id="id_2-install-from-github">2) Install from Github<a class="anchor" aria-label="anchor" href="#id_2-install-from-github"></a>
</h4>
<p>Use the <code>devtools</code> package to install the development version of <code>es.dhaka</code> from the GitHub repository. R version &gt;= 3.5.0 recommended.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'devtools'</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"gilesjohnr/es.dhaka"</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>This package is currently in development and maintained by John Giles (<a href="https://github.com/gilesjohnr" class="external-link">@gilesjohnr</a>). For general questions, contact John Giles (<a href="mailto:john.giles@gatesfoundation.org" class="email">john.giles@gatesfoundation.org</a>) and/or Jillian Gauld (<a href="mailto:jillian.gauld@gatesfoundation.org" class="email">jillian.gauld@gatesfoundation.org</a>). Note that this software is constructed under Copyright 2024 Bill &amp; Melinda Gates Foundation and was developed for specific environmental sampling applications and not intended to generalize perfectly to all settings.</p>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>This work was developed at the <a href="https://www.idmod.org/" class="external-link">Institute for Disease Modeling</a> in support of funded research grants made by the <a href="https://www.gatesfoundation.org/" class="external-link">Bill &amp; Melinda Gates Foundation</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gilesjohnr/es.dhaka/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing es.dhaka</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>John R Giles <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gilesjohnr/es.dhaka/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/gilesjohnr/es.dhaka/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by John R Giles.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
